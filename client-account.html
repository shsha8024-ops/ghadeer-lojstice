<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ÙƒØ´Ù Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ„ | Ø´Ø±ÙƒØ© Ø§Ù„ØºØ¯ÙŠØ± Ù„Ù„Ù†Ù‚Ù„ ÙˆØ§Ù„ØªØ®Ù„ÙŠØµ Ø§Ù„ÙƒÙ…Ø±ÙƒÙŠ</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
<style>
html, body {
  height: 100%;
  margin: 0;
  font-family: "Cairo", sans-serif;
  background: linear-gradient(180deg,#f7faff,#eef5ff);
  color: #000;
  direction: rtl;
  overflow-x: hidden;
}

/* ===== Ø§Ù„Ù‡ÙŠØ¯Ø± ===== */
header {
  background: linear-gradient(90deg,#002b72,#0055a5,#c2a356);
  color: #fff;
  padding: 1.2rem 2.5rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 4px 20px rgba(0,0,0,0.15);
  border-bottom: 3px solid #c2a356;
}
.brand {display:flex;align-items:center;gap:14px}
.brand img{width:70px;height:70px;object-fit:contain}
.brand-name span{font-size:1.5rem;font-weight:900}
.brand-name small{color:#fff8d9}
nav ul{display:flex;gap:1.2rem;list-style:none;margin:0;padding:0}
nav a{color:#fff;text-decoration:none;font-weight:600}
nav a:hover{color:#fcd670}

/* ===== Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ===== */
main {
  min-height: calc(100vh - 180px);
  max-width: 1100px;
  margin: 2rem auto;
  padding: 1rem;
}
h2 {
  text-align: center;
  color: #004b95;
  border-bottom: 2px solid #c2a356;
  display: inline-block;
  padding-bottom: 6px;
  margin-bottom: 2rem;
}

/* ===== Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ ===== */
table {
  width: 100%;
  border-collapse: collapse;
  background: #fff;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 20px rgba(0,0,0,0.05);
  margin-bottom: 2rem;
}
th, td {
  padding: 10px;
  border-bottom: 1px solid #eee;
  text-align: center;
  color: #000;
}
th {background: #f2f6fb;color:#003366;font-weight:700;}
tfoot td {background:#fffbea;font-weight:bold;color:#000;}

/* ===== Ø§Ù„Ø£Ø²Ø±Ø§Ø± ===== */
.buttons {
  text-align: center;
  margin: 1.5rem 0;
}
button {
  margin: 0.4rem;
  padding: 10px 24px;
  border-radius: 10px;
  border: none;
  font-weight: 600;
  cursor: pointer;
  transition: 0.3s;
}
.save-btn {background:linear-gradient(90deg,#004b95,#008d5f);color:#fff;}
.save-btn:hover {background:#008d5f;}
.pdf-btn {background:linear-gradient(90deg,#b9973e,#f0cd63);color:#000;}
.back-btn {background:#004b95;color:#fff;}
button:hover {transform:scale(1.05);}

/* ===== Ø§Ù„ÙÙˆØªØ± ===== */
footer {
  background:#fafafa;
  text-align:center;
  padding:1.5rem;
  color:#000;
  border-top:1px solid #ddd;
  position: relative;
  bottom: 0;
  width: 100%;
}
</style>
</head>
<body>

<header>
  <div class="brand">
    <img src="ghadeer-logo.png" alt="ghadeer logo">
    <div class="brand-name">
      <span>Ø´Ø±ÙƒØ© Ø§Ù„ØºØ¯ÙŠØ±</span><br>
      <small>Ù„Ù„Ù†Ù‚Ù„ ÙˆØ§Ù„ØªØ®Ù„ÙŠØµ Ø§Ù„ÙƒÙ…Ø±ÙƒÙŠ</small>
    </div>
  </div>
  <nav>
    <ul>
      <li><a href="client.html">Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</a></li>
      <li><a href="client-statement.html">Ø§Ù„ÙˆØµÙˆÙ„Ø§Øª</a></li>
      <li><a href="client-receipts.html">Ø§Ù„Ù‚Ø¨ÙˆØ¶Ø§Øª</a></li>
    </ul>
  </nav>
</header>

<main>
  <h2 id="clientName">ÙƒØ´Ù Ø­Ø³Ø§Ø¨: Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…Ø­Ø¯Ø¯</h2>

  <h3>ğŸ“¦ Ø§Ù„ÙˆØµÙˆÙ„Ø§Øª</h3>
  <table id="t1">
    <thead>
      <tr><th>Ø±Ù‚Ù… Ø§Ù„ÙˆØµÙ„</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ø¨ÙŠØ§Ù†</th><th>Ø§Ù„Ù…Ø¨Ù„Øº ($)</th></tr>
    </thead>
    <tbody></tbody>
    <tfoot><tr><td colspan="3">Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙˆØµÙˆÙ„Ø§Øª</td><td id="sum1">0$</td></tr></tfoot>
  </table>

  <h3>ğŸ’° Ø§Ù„Ù‚Ø¨ÙˆØ¶Ø§Øª</h3>
  <table id="t2">
    <thead>
      <tr><th>Ø±Ù‚Ù… Ø§Ù„Ù‚Ø¨Ø¶</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ø¨ÙŠØ§Ù†</th><th>Ø§Ù„Ù…Ø¨Ù„Øº ($)</th></tr>
    </thead>
    <tbody></tbody>
    <tfoot><tr><td colspan="3">Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù‚Ø¨ÙˆØ¶Ø§Øª</td><td id="sum2">0$</td></tr></tfoot>
  </table>

  <div class="summary" style="text-align:center;margin-top:2rem;">
    <h3 style="color:#004b95;">ğŸ“Š Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø§Ù„ÙŠ</h3>
    <p>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚: <strong id="prev">0$</strong></p>
    <p>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙˆØµÙˆÙ„Ø§Øª: <strong id="ops">0$</strong></p>
    <p>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù‚Ø¨ÙˆØ¶Ø§Øª: <strong id="pay">0$</strong></p>
    <p>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: <strong id="final" style="color:#008d5f;font-size:1.3rem;">0$</strong></p>
  </div>

  <div class="buttons">
    <button class="save-btn" onclick="saveStatement()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ÙƒØ´Ù</button>
    <button class="pdf-btn" onclick="openPDF()">ğŸ“„ PDF</button>
    <button class="back-btn" onclick="window.location.href='client.html'">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
  </div>
</main>

<footer>
  Ø²Ø§Ø®Ùˆ - Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„Ø®Ù„ÙŠÙ„ ğŸ“ 07504084359 â€¢ ğŸ“§ starzeki001@gmail.com  
  <br>Â© 2026 Ø´Ø±ÙƒØ© Ø§Ù„ØºØ¯ÙŠØ± Ù„Ù„Ù†Ù‚Ù„ ÙˆØ§Ù„ØªØ®Ù„ÙŠØµ Ø§Ù„ÙƒÙ…Ø±ÙƒÙŠ â€“ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©
</footer>

<script>
const client = localStorage.getItem('currentClient') || 'Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
document.getElementById('clientName').textContent = 'ÙƒØ´Ù Ø­Ø³Ø§Ø¨: ' + client;

let invoices = JSON.parse(localStorage.getItem('ghadeerInvoices') || '[]');
let receipts = JSON.parse(localStorage.getItem('ghadeerAllReceipts') || '[]');
let prevBalance = parseFloat(localStorage.getItem('ghadeerPrevBalance') || '0');

function render() {
  const t1=document.querySelector('#t1 tbody');
  const t2=document.querySelector('#t2 tbody');
  t1.innerHTML=''; t2.innerHTML='';
  let sum1=0,sum2=0;

  invoices.forEach(inv=>{
    inv.receipts?.forEach(r=>{
      t1.innerHTML+=`<tr><td>${r.id}</td><td>${r.date}</td><td>${r.driver} - ${r.car}</td><td>${r.amount.toFixed(2)}$</td></tr>`;
      sum1+=r.amount;
    });
  });
  receipts.filter(r=>r.client===client).forEach(rc=>{
    t2.innerHTML+=`<tr><td>${rc.id}</td><td>${rc.date}</td><td>${rc.method}</td><td>${rc.amount.toFixed(2)}$</td></tr>`;
    sum2+=rc.amount;
  });

  document.getElementById('sum1').textContent=sum1.toFixed(2)+'$';
  document.getElementById('sum2').textContent=sum2.toFixed(2)+'$';
  document.getElementById('prev').textContent=prevBalance.toFixed(2)+'$';
  document.getElementById('ops').textContent=sum1.toFixed(2)+'$';
  document.getElementById('pay').textContent=sum2.toFixed(2)+'$';
  const final=prevBalance+sum1-sum2;
  document.getElementById('final').textContent=final.toFixed(2)+'$';
}

function saveStatement(){
  const final=document.getElementById('final').textContent.replace('$','');
  localStorage.setItem('ghadeerPrevBalance',final);
  alert('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„ÙƒØ´Ù Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¨Ù†Ø¬Ø§Ø­');
}

function openPDF(){
  window.open('account-pdf.html','_blank');
}

render();
</script>

</body>
</html>